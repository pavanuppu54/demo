Thanks! Let's fix the Restore button issue and ensure that restored employees show up in the Get All Employees section.


---

Spring Boot Fixes (Backend)

1. Restore API not working? Let's add/fix it:

In EmployeeService.java:

public void restoreEmployee(Long id) {
    Employee emp = employeeRepository.findById(id)
        .orElseThrow(() -> new ResponseStatusException(HttpStatus.NOT_FOUND, "Employee not found"));
    emp.setIsDeleted(false);
    employeeRepository.save(emp);
}

In EmployeeController.java:

@PatchMapping("/restore/{id}")
public ResponseEntity<String> restoreEmployee(@PathVariable Long id) {
    employeeService.restoreEmployee(id);
    return ResponseEntity.ok("Employee restored successfully");
}

Make sure this method exists and URL is:
http://localhost:8080/employee/restore/{id}


---

Angular Fixes (Frontend)

2. Ensure service method uses correct PATCH request:

In employee.service.ts:

restoreEmployee(id: number): Observable<any> {
  return this.http.patch(`${BASE_URL}/employee/restore/${id}`, {});
}

3. In recently-deleted.component.ts:

After restoring, call both:

getDeletedEmployees() – to refresh the deleted list

And optionally, navigate to / or manually update GetAllEmployeeComponent if both are on screen


restoreEmployee(id: number): void {
  this.employeeService.restoreEmployee(id).subscribe(() => {
    this.getDeletedEmployees(); // Refresh deleted list

    // OPTIONAL: If you want to navigate to list view after restore
    // this.router.navigate(['/']);
  });
}


---

Final: Check getAllEmployees() only returns not-deleted

public List<EmployeeDTO> getAllEmployees() {
    return employeeRepository.findByIsDeletedFalse()
        .stream()
        .map(emp -> new EmployeeDTO(emp.getId(), emp.getName(), emp.getDepartment(), emp.getSalary()))
        .collect(Collectors.toList());
}


---

How to verify it works

1. Delete an employee (they move to Recently Deleted).


2. Go to Recently Deleted – hit Restore on one.


3. That employee disappears from Recently Deleted list.


4. Refresh Get All Employees – the restored employee should be back.



If still not showing, try refreshing manually or navigating back to '/' from the restore method.


---

Do you want me to add an automatic refresh in the GetAllEmployeeComponent as well after restore? Or toast notification after restore action?

